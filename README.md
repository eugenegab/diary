# Flask Diary App

Это веб-приложение на Flask для ведения личных записей с системой регистрации, восстановления пароля, авторизацией, редактированием профиля и CRUD-функциональностью для заметок.

---
![img.png](media/img.png)
![img_1.png](media/img_1.png)
![img_2.png](media/img_2.png)
![img_3.png](media/img_3.png)
![img_4.png](media/img_4.png)
![img_5.png](media/img_5.png)
![diary.mp4](media/diary.mp4)
## Возможности

- Регистрация по логину и email (подтверждение регистрации через письмо)
- Вход по логину и паролю
- Восстановление пароля через email
- Проверка email и логина на уникальность при регистрации
- Валидация логина, email и пароля
- Система сессий
- Просмотр всех записей
- Просмотр отдельной записи
- Создание, редактирование и удаление записей
- Редактирование профиля: логин, email, имя, пароль
- Письмо с подтверждением при смене пароля
- Раздел "О нас"
- Удобная навигация: возврат на предыдущую страницу (карточка, форма редактирования, профиль), либо на главную, если переход невозможен

---

## Установка и запуск

### 1. Установите зависимости
```
pip install -r requirements.txt
```

### 2. Настройка переменных окружения

Создайте `.env` файл на основе `.env-example`:
```
cp .env_example .env
```

В `.env` должны быть указаны все нужные переменные:
- `SECRET_KEY`
- `MAIL_SERVER`
- `MAIL_PORT`
- `MAIL_USE_TLS`
- `MAIL_USERNAME`
- `MAIL_PASSWORD`
- `SQLALCHEMY_DATABASE_URI`

> Используется PostgreSQL.
> Необходимо установить сервер postgresql: https://www.postgresql.org/download/windows/. И создать базу данных.
> Пример строки подключения:
```
SQLALCHEMY_DATABASE_URI=postgresql://username:password@localhost/dbname
```

### 3. Создать и применить миграции. Для этого в терминале выполнить команды:
```
flask db migrate -m "init"
```
```
flask db upgrade
```
---

## Регистрация через email

1. Пользователь заполняет форму регистрации.
2. На указанный email приходит письмо со ссылкой.
3. Только после перехода по этой ссылке создается аккаунт и происходит автоматический вход.

---

## Восстановление пароля

1. Пользователь указывает email.
2. Получает письмо со ссылкой.
3. Переходит по ссылке и вводит новый пароль.

---

## Настройка почты

### Для Gmail:

1. Включите двухфакторную аутентификацию: https://myaccount.google.com/security
2. Создайте **пароль приложения**: https://support.google.com/accounts/answer/185833
3. Укажите его в `.env` как `MAIL_PASSWORD`, а `MAIL_USERNAME` — ваш email

> Подробнее: [Как настроить SMTP в Gmail (официальная инструкция)](https://support.google.com/mail/answer/7126229)

---

## Авторизация через Google (если добавите)

Для авторизации через Google вам понадобится создать OAuth 2.0 Client ID:
1. Перейдите в [Google Cloud Console](https://console.cloud.google.com/)
2. Создайте проект и включите **Google+ API**
3. В разделе “OAuth consent screen” настройте публичный профиль
4. В разделе “Credentials” создайте OAuth-клиент для Web
5. Укажите redirect URI, например:
```
http://localhost:5000/login/google/authorized
```

Полная инструкция от Google: [Настройка OAuth 2.0](https://developers.google.com/identity/protocols/oauth2)

---

## Запуск

```bash
python run.py
```

Приложение будет доступно по адресу http://localhost:5000/

---

## Примечания

- Без подтверждения email аккаунт не создается.
- Все действия с данными защищены авторизацией.
- При смене пароля отправляется письмо на почту.
- Навигация автоматически возвращает пользователя назад, если история известна, иначе — на главную страницу.